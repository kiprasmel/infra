# needs to be in sync with pr-versions project

services:
  pr-versions:
    container_name: pr-versions
    build:
      context: .
    ports:
      - "$PORT:10000"
    env_file:
      - .env
    volumes:
      - ./volume/.image-cache:/usr/src/app/.image-cache
      - ./volume/.local:/usr/src/app/.local
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:$PORT/ || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 3
